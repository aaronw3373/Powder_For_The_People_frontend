function createResortAjax(a){$.ajax({url:resort_index,type:"POST",dataType:"json",data:a}).done(function(){console.log("Created")}).fail(function(){console.log("error")})}function updateResortAjax(a,b){$.ajax({url:a,type:"PATCH",dataType:"json",data:b}).done(function(){console.log("Updated")}).fail(function(){console.log("error")})}function deleteResortAjax(a){$.ajax({url:a,type:"DELETE"}).done(function(){console.log("Deleted")}).fail(function(){console.log("error")})}function loadResortsAjax(){$("#full_list").html("<h2> Resorts</h2>"),$.ajax({url:resort_index,type:"GET",dataType:"json"}).done(function(a){a.forEach(function(a){appendResortList(a)})}).fail(function(){console.log("error")})}function showResortAjax(a,b){$.ajax({url:a,type:"GET",dataType:"json"}).done(function(a){"none"===b?renderShowResort(a.resort,a.weather):"admin"===b?renderShowResortAdmin(a.resort):"favorite"===b&&renderFavorite(a.resort)}).fail(function(){console.log("error")})}function createUserAjax(a){$.ajax({url:user_index,type:"POST",dataType:"json",data:a}).done(function(){$("#signUp").hide(),$("#loggin").show()}).fail(function(){console.log("error")})}function showUserAjax(a){$.ajax({url:a,type:"GET",dataType:"json"}).done(function(a){isUserGod(a),isUserAdmin(a),isUser(a)}).fail(function(a){console.log(a)})}function createFavoriteAjax(a){$.ajax({url:favorite_index,type:"POST",dataType:"json",data:a}).done(function(){console.log("Created Favorite")}).fail(function(){console.log("error")})}function showFavoriteOfUserAjax(a){$.ajax({url:a,type:"GET",dataType:"json"}).done(function(a){a.forEach(function(a){callFavorite(a)})}).fail(function(){console.log("error")})}function rating(a,b,c){return Math.round((2e3+a+b)/500*(1+c))}function quote(a,b){var c="Call In Sick And Grab Your Boots",d="I Doubt Your Boss Will Mind",e="It Better Be The Weekend Already",f="At Least Nobody Else Will Be There",g="If You Are Desperate But Then Again Spring Conditions",h="Let's Go Surfing Instead";return 4>b||b>10?1>=a/20?g:2>=a/20?f:3>=a/20?e:4>=a/20?d:c:h}function CRUDPRIV(){$("#create_crud").on("click",function(){var a=getCRUDData();createResortAjax(a),loadResortsAjax()}),$("#read_crud_ID").on("click",function(){c_json=getCRUDData();var a=resort_show+$("#ID_crud").val();showResortAjax(a,"admin")}),$("#read_crud_name").on("click",function(){c_json=getCRUDData();var a=resort_name+c_json.resort.name;showResortAjax(a,"admin")}),$("#update_crud").on("click",function(){var a=$("#ID_crud").val();c_json=getCRUDData();var b=resort_show+a;updateResortAjax(b,c_json),loadResortsAjax()}),$("#destroy_crud_id").on("click",function(){c_json=getCRUDData();var a=resort_show+$("#ID_crud").val();deleteResortAjax(a),loadResortsAjax()}),$("#destroy_crud_name").on("click",function(){c_json=getCRUDData();var a=resort_name+c_json.resort.name;deleteResortAjax(a),loadResortsAjax()})}function getCRUDData(){var a=$("#name_crud").val(),b=$("#vertical_crud").val();b=Number(b);var c=$("#acres_crud").val();c=Number(c);var d=$("#location_crud").val();d="pws:"+d;var e={resort:{name:a,vertical:b,acres:c,location:d}};return e}function renderShowResort(a,b){var c=new Date;$("#resort_info").html("<h2 id=favorite"+a.id+">"+a.name+"</h2><h4 id='vertical'>Vertical Feet: "+a.vertical+"</h4><h4 id='acres'>Skiable Acres: "+a.acres+"</h4><h4 id='current_temp_f'>Temp: "+b.current_observation.temp_f+" â„‰ </h4>"),$("#favorite_button").show(),$("#wunderground").show(),$("#rating").html("Powder Index: "+rating(a.vertical,a.acres,0)),$("#quote").html(quote(rating(a.vertical,a.acres),parseInt(c.getMonth()),0))}function renderShowResortAdmin(a,b){$("#resorts_info_admin").html("<h3>ID: "+a.id+" name: "+a.name+" vertical: "+a.vertical+" acres: "+a.acres+" location: "+a.location+"</h3>")}function appendResortList(a){var b=a.name.replace(/ /g,"%20");$("#full_list").append("<h3 class='resort' id=resort"+b+">"+a.name+"</h3>")}function createUser(){var a=getUserInfo();""===a.user.name||""===a.user.username?alert("Must enter a Name, Username and Password"):createUserAjax(a)}function getUserInfo(){var a=$("#new_fname").val(),b=$("#new_username").val(),c=$("#new_password").val(),d={user:{name:a,username:b,password:c,privileges:"none"}};return d}function isUserGod(a){"god"===a.privileges&&($("#loggin").hide(),$("#logged_in").show(),$("#logged_in_name").html("Welcome "+a.name),console.log("loged in as God"),$("#super_div").toggle(),$("#resort_info").toggle(),$("#pow_factor").toggle(),userUID=a.id,CRUDPRIV())}function isUserAdmin(a){"admin"===a.privileges&&($("#loggin").hide(),$("#logged_in").show(),$("#logged_in_name").html("Welcome "+a.name),userUID=a.id)}function isUser(a){"none"===a.privileges&&($("#loggin").hide(),$("#logged_in").show(),$("#logged_in_name").html("Welcome "+a.name),userUID=a.id,showFavoriteOfUser(userUID))}function createFavorite(a,b){var c={favorite:{user:b,resort:a}};createFavoriteAjax(c)}function showFavoriteOfUser(a){var b=favorite_show+a;showFavoriteOfUserAjax(b)}function callFavorite(a){var b=resort_show+a.resort;showResortAjax(b,"favorite")}function renderFavorite(a){var b=a.name.replace(/ /g,"%20");$("#favorite_list").append("<h3 class='resort' id=favorite"+b+">"+a.name+"</h3>")}var resort_index="http://localhost:5000/resorts",resort_show="http://localhost:5000/resorts/",resort_name="http://localhost:5000/resortsname?name=",user_index="http://localhost:5000/users",user_show="http://localhost:5000/users/",user_name="http://localhost:5000/usersname?username=",favorite_index="http://localhost:5000/favorites",favorite_show="http://localhost:5000/favorites/",userUID;$(document).ready(function(){loadResortsAjax(),$("#full_list").on("click",".resort",function(a){var b=resort_name+a.target.id.substring(6);console.log(b),showResortAjax(b,"none")}),$("#search_button").on("click",function(){var a=resort_name+$("#search_box").val();return console.log(a),showResortAjax(a,"none"),!1}),$("#about_button").on("click",function(){console.log("about click")}),$("#wunderground").on("click",function(){window.open("http://www.wunderground.com/?apiref=390cac5ce90ab221")}),$("#favorite_button").on("click",function(){var a=$("#resort_info h2").attr("id");a=a.substring(8);var b=userUID;createFavorite(a,b)}),$("#favorite_list_button").on("click",function(){$("#full_list").hide(),$("#favorite_list").show()}),$("#resort_list_button").on("click",function(){$("#favorite_list").hide(),$("#full_list").show()}),$("#favorite_list").on("click",".resort",function(a){var b=resort_name+a.target.id.substring(8);console.log(b),showResortAjax(b,"none")}),$("#login_button").on("click",function(){var a=$("#usn").val(),b=($("#psw").val(),user_name+a);return showUserAjax(b),console.log("logging in"),!1}),$("#signUp_button").on("click",function(){return $("#loggin").hide(),$("#signUp").show(),!1}),$("#new_signup").on("click",function(){createUser()}),$("#logout_button").on("click",function(){console.log("logging out"),location.reload()})});